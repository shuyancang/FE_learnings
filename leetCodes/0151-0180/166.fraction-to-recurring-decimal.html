<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>分数到小数</title>
</head>
<body>
  <script>
    // 给定两个整数，分别表示分数的分子 numerator 和分母 denominator，以 字符串形式返回小数 。
    // 如果小数部分为循环小数，则将循环的部分括在括号内。
    // 如果存在多个答案，只需返回 任意一个 。
    // 对于所有给定的输入，保证答案字符串的长度小于 104 。

    // 示例 1： 输入：numerator = 1, denominator = 2 输出："0.5"
    // 示例 2： 输入：numerator = 2, denominator = 1 输出："2"
    // 示例 3： 输入：numerator = 2, denominator = 3 输出："0.(6)"
    // 示例 4： 输入：numerator = 4, denominator = 333 输出："0.(012)"
    // 示例 5： 输入：numerator = 1, denominator = 5   输出："0.2"

    // 提示：
    //   -231 <= numerator, denominator <= 231 - 1
    //   denominator != 0

    var fractionToDecimal = function(numerator, denominator) {
      // 1. 遍历即可
      // 2. 每次numerator进行记录入hash, denominator重复或denominator = 0
      // 3. denominator重复用(), 为0则能够整除;
      const intPart = parseInt(numerator / denominator); // 整数部分;
      const demPart = numerator % denominator; // 余数部分;
      const hash = {};
      let demList = [];
      let overIndex = -1;
      const dfs = (res, list) => {
        if (res === 0) {
          demList = list;
          return true; // 整除啦！
        }
        if(hash[res]){ // 哪里开始重复的标志！
          demList = list;
          return false;
        }
        const intNum = parseInt((res * 10) / denominator);
        const demNum = (res * 10) % denominator;
        hash[res] = true;
        list.push(intNum);
        dfs(demNum, list);
      }
      dfs(demPart, []);
      if (isOver) { // 整除
        return `${intPart}${demList.length > 0 ? `.${demList.join('')}` : ''}`;
      }
      return `${intPart}.(${demList.join('')})`;
    };
    fractionToDecimal(1, 2); // 0.5
    fractionToDecimal(2, 1); // 2
    fractionToDecimal(2, 3); // 0.(6)
    fractionToDecimal(4, 333); // 0.(012)
    fractionToDecimal(1, 5); // 0.2
  </script>
</body>
</html>