<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // 浏览器为什么要阻止跨域请求, 如何解决跨域, 每次跨域请求都需要到达后端吗
    /*
      1. 跨域 => 同源策略: 基于网络安全考虑。关注三点: 协议，域名，端口
      2. 那些网络资源涉及跨域禁止操作
        无法获取非同源网页的cookie, localStorage, indexedDB(缓存)
        非同源网页DOM(iframe)
        无法向非同源地址发送ajax请求或fetch请求
      3. 解决跨域
        jsonp
        document.domain + iframe: 设置成自身或更高一级的父域, 主域必须相同.
        location.hash + iframe
        window.name + iframe: window.name有个特征, 在一个窗口的生命周期里, 窗口载入的所有页面都是共享window.name, 每个页面对window.name都有读写权限
        postMessage
        CORS: 服务端设置的不需客户端操作, 背后思想是使用自定义的http头部让浏览器和服务器沟通, 从而决定响应是否成功。如果服务器认为这个请求可以接受, 就在Access-Control-Allow-Origin头部中回发相同的源信息, 如果没有这个头部或信息源不匹配, 浏览器就会驳回请求.
        nginx: 中转代理
        nodejs中间件代理
        websocket
        其他的方式: postMessage, onmessage; link/script/img/bacground不受跨域限制的方式等
    
      4. 跨域需要明确的问题
        跨域并非浏览器限制发起跨域请求, 而是请求正常发起但结果被浏览器拦截, 每次请求都会发出服务器也会相应，但浏览器端在接受响应时基于同源策略拦截。
        有些浏览器不允许https 跨域访问http, 这会在未发出请求就被拦截。
    */

  </script>
</body>
</html>