<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // 写出函数执行结果:

    var a = { k1: 1 };
    var b = a; 
    a.k3 = a = { k2: 2 };

    console.log(a);
    console.log(b);

    /*
      1. var b = a; 此时, a, b指向同一地址, 值{ k1: 1 };
      2. a.k3的点优先级高于等号, 因此, 此时, ab同为{k1: 1, k3: undefined}
      3. 等号从右往左执行, 因此a改变指向, a变为{k2:2};
      4. a.k3 = (a = {k2:2}); 等号右边执行时, a已经改变指针指向, 原来的a.k3实际上是b.k3;
      5. 因此a最终为{k2:2}, (a = {k2:2})表达式返回值为{k2:2},因此b：{k1: 1, k3: {k2: 2}}
    */


  </script>
  <script>
    async function async1() {
      console.log("async1 start");
      await async2();
      console.log("async1 end");
    }
    async function async2() {
      console.log("async2");
    }
    console.log("script start");
    setTimeout(function () {
      console.log("setTimeout");
    }, 0);
    async1();
    new Promise(function (resolve) {
      console.log("promise1");
      resolve();
    }).then(function () {
      console.log("promise2");
    });
    console.log("scripts end");
    // 写出代码执行完成打印的结果
    // script start => async1 start => async2 => promise1 => scripts end => async1 end => promise2 => setTimeout
  </script>
</body>
</html>